---
layout:     post
title:      构建高可用
subtitle:   高可用系统
date:       2017-12-28
author:     longyi
header-img: img/post-bg-re-vs-ng2.jpg
catalog: true
tags:
    - 高可用
    - java
    
---

>高可用系统，追求多个9的可用性，对于分布式系统来说，我们通常都认为遵守CAP理论，根据业务场景，取平衡。

高可用，首先想到的是避免单点，防止单点故障。

1.负载均衡
	
	硬均衡：F5设备 ，standBy从，主备切换。

	软均衡：类似，实现方式LVS之类。


具体均衡的策略：
	
	A.集中策略：权重、随机、负载能力（静态与动态）、connection等

	B.分布策略：基于Gossip模型的方式。一般是内部的均衡策略

对于负载均衡，也要进行细分，比如请求流程和返回响应流程：

	请求流程：1.分配策略；2.web请求会话处理方式
	返回数据：1.经由负载均衡点；2.直接返回

中心负载均衡的缺陷：将请求分发到业务机器，业务机器对请求进行queue，如果其中某一个请求耗时，则导致该queue的请求任务被延时，很多任务会超时，类似于超时收银柜台某一个客户耗时，但是其它柜台却无法协同解决该问题（按照理想设计应当其它节点协同处理）。基于此，twinter提出了一个unicorn的解决方案，该方案是负载均衡机器对所有请求只发到**一个队列**，然后业务机器在该队列获取任务处理。某一个业务机器的耗时操作，并不影响后面的任务处理。




	










